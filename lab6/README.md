## OSPF. Фильтрация.

#### План работы:

1. Настроим маршрутизаторы R14-R15 в зоне 0 - backbone(Normal-area).
2. Настроим маршрутизаторы R12-R13 в зоне 10. Дополнительно к маршрутам должны получать маршрут по умолчанию (NSSA-area).
3. Настроим маршрутизатор R19 в зоне 101 и он будет получать только маршрут по умолчанию(Totally Stub- area).
4. Настроим маршрутизатор R20 в зоне 102 и он будет получать все маршруты, кроме маршрутов до сетей зоны 101.

Наша топология для настройки:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/a0aecf58-9c02-48b6-b8c7-f900f5b66d0c)



Начнем с настройки area-0, в неё мы отнесем интерфейсы e0/0, e0/1, e1/0 R14, e0/0, e0/1, e1/0 R15, e0/2, e0/3, e1/0 R12 и e0/2, e0/3, e1/0 R13. Настраиваются интерфейсы на роутерах однотипно, поэтомы проведем настройку на примере роутера R14. Сначала активируем протокол маршрутизации OSPF, затем создадим area 101  (т.к. наш роутер является ABR-на стыке area-0  и area-101) с типом Totally Stub(по заданию 101 зона получает только маршрут по умолчанию). Переведем все интерфейсы роутера в состояние passive (касательно OSPF-протокола), и затем переведем в активное состояние только используемые физические интерфейсы, оставив loopback- интерфейс в состоянии passive. Назначим интерфейсам соответствующие зоны:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/7c50e022-df29-48a1-9ab4-0c2a6e60befe)

Настроим роутер R15 (следует пояснить, что R15-тоже ABR -на границе erea-0 и area-102, а зона 102 является Normal-area, но не транслирует маршруты в сети зоны 101, для этого мы создадим prefix-list запрещающий трансляцию маршрутов в сети зоны 101):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/88d35ec8-baf7-466f-b2d4-db8c37719daa)



Настроим роутрер R12(он тоже ABR- на границе area-0 и area-10 - NSSA- area, потому что в этой зоне у нас есть ASBR - это L3-коммутаторы с пользовательскими сетями, которым необходимо иметь и маршрут по умолчанию):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/c06ec58a-da2e-40fe-ab83-5135d61060d9)

Настроим R13(идентична R12):

![image-20230810212357425](https://github.com/SalminKHV/OTUS/assets/130359715/d78ccccb-4180-4d6c-956e-c881335f2d2e)

Настроим SW4 (является ASBR- в area 10, также отмечу что в area-10 включены L3-интерфейсы vlan 3, Vlan4 и Vlan 9(Ether-Channell)): 

![image](https://github.com/SalminKHV/OTUS/assets/130359715/2764b174-06a8-4b26-b058-2e8828278750)

Настроим SW5(идентично SW4):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/8669f5cb-6df2-48fe-9894-16e47144045f)

Теперь настроим R19(необходимо отметить, что R19 находится в зоне 101 и она Totally-Stub):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/e5877cb1-305a-46d9-a1d5-c80b2a38447d)

Настроим R20(Normal-area 102, без префиксов в area-101):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/6324219a-d452-4690-9031-cdeea7a425c4)

Теперь посмотрим таблицы OSPF маршрутизаторов из разных area и убедимся, что все задания выполнены и работают:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/abee95f3-c9ea-49bf-bca9-4385a7a81d6b)

Итак, видно что маршруты между всеми area работают, в 102-ю не передаются сети из 101-й, в 10-й есть все маршруты и от офисных сетей и со всех остальных, но в area-0 транслируются только префиксы офисных компьютеров, а не все линки, посредством Type-7 LSA.
