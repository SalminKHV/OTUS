# eBGP. Основы

### Карта сети
![Карта сети](image.png)

#### Цель:

Настроить BGP между автономными системами
Организовать доступность между офисами Москва и С.-Петербург

Описание/Пошаговая инструкция выполнения домашнего задания:

В этой самостоятельной работе мы :

1. Настроим eBGP между офисом Москва и двумя провайдерами - Киторн и Ламас.
2. Настроим eBGP между провайдерами Киторн и Ламас.
3. Настроим eBGP между Ламас и Триада.
4. Настроим eBGP между офисом С.-Петербург и провайдером Триада.
5. Организуем IP доступность между пограничным роутерами офисами Москва и С.-Петербург.



### Настроим eBGP между офисом Москва и двумя провайдерами - Киторн и Ламас.

Сперва настроим eBGP между Москвой и Киторн:

На R14: запустим процесс BGP с номером AS 1001, назначим id-роутера, пропишем адрес loopback, роутера, который решили сделать доступным из интернета, и пропишем единственного соседа из другой AS 101:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/d6802021-730a-4421-8a41-46cb55108b8a)

На R22: запустим процесс BGP с номером AS 101, назначим id-роутера и пропишем соседей из соседних AS 1001, 520, 301, а также будем редистрибьютить все подключенные сети командой redistribute connected (чтобы не прописывать каждую AS, подключенную к роутеру):



![image](https://github.com/SalminKHV/OTUS/assets/130359715/6089890e-9715-484c-affb-da502336e6a5)

Теперь настроим eBGP между Москвой и ЛАМАСом(AS 301):

сперва на R15 запустим процесс BGP с номером AS 1001, назначим id-роутера, пропишем адрес loopback, роутера, который решили сделать доступным из интернета, и пропишем единственного соседа из другой AS 301:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/9b1dd78e-b74f-44bf-a6fb-5c5aeade59ea)



На R21: запустим процесс BGP с номером AS 301, назначим id-роутера и пропишем соседей из соседних AS 1001, 520, 301, а также будем редистрибьютить все подключенные сети командой redistribute connected (чтобы не прописывать каждую AS, подключенную к роутеру): 

![image](https://github.com/SalminKHV/OTUS/assets/130359715/bd705260-263b-4caf-aee7-da528b71bb7b)



#### Выполнив первое задание, мы выполнили и второе.

Для выполнения третьего задания на роутерах R23 и R24 настроим процесс BGP:

На R23 указываем только одну удаленную AS Киторн(101):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/a4279749-8c1a-448f-9ec0-b743fcaa39a2)

И R24 Указываем обе присоединенные AS 2042(Санкт Петербург) и 301 (Ламас):

![image](https://github.com/SalminKHV/OTUS/assets/130359715/09314853-0c90-49ae-b210-f06e0223373d)

#### Выполним четвертое задание настроив связность Триады и Сю-Петербурга, попутно выполнив Пятое задание:

На R18: запустим процесс BGP с номером AS 2042, назначим id-роутера, пропишем адрес loopback, роутера, который решили сделать доступным из интернета, и пропишем единственного ДЕЙСТВУЮЩЕГО соседа из другой AS 2042:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/607eec48-4734-40e1-a884-3b55997d924b)



Проверим таблицы маршрутизации пограничных роутеров С.-Петербурга и Москвы:

 Таблица BGP R18, в которой видим маршруты к роутеру R 14 и R15:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/6898c6ee-c276-4222-ab80-335ffaa50bf5)



проверим также их доступность:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/bda0f488-be00-4646-a894-a0b047bb2116)

На R14 видим что маршрут к роутеру R15 в таблицу маршрутизации ИПЗ не попал, т.к. роутеры находятся в одной AS 1001:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/483ae39d-cb70-442b-aac8-29126d03ae31)

и на R15:

![image](https://github.com/SalminKHV/OTUS/assets/130359715/ea18cd54-3b8c-434f-8b34-00400b1b8f1f)
